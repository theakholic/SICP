#lang racket

(define (smallest-divisor n)
  (define (my-smallest-divisor curr n)
    (if (< (sqr curr) n)
        (if (divides? curr n)
          curr
          (my-smallest-divisor (+ 1 curr) n))
        (if (= (sqr curr) n)
          curr
          n)))
  (define (divides? x n)
    (= (remainder n x) 0))
  (my-smallest-divisor 2 n))


(define (prime? n)
  (= (smallest-divisor n) n))